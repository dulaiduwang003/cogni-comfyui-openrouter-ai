## Conni-X-Pro

<p align="center">
  <a href="./README_en-US.md">English</a> | <a href="./README.md">ç®€ä½“ä¸­æ–‡</a> | <a href="./README_ja-JP.md">æ—¥æœ¬èª</a>
</p>

<p align="center">
  <img alt="Conni-X-Pro" src="https://img.shields.io/badge/Spring%20Boot-3.x-6DB33F?logo=springboot&logoColor=white">
  <img alt="Java" src="https://img.shields.io/badge/Java-21+-red?logo=openjdk&logoColor=white">
  <img alt="Vue" src="https://img.shields.io/badge/Vue-3-42b883?logo=vue.js&logoColor=white">
  <img alt="Vite" src="https://img.shields.io/badge/Vite-5-646CFF?logo=vite&logoColor=white">
  <img alt="License" src="https://img.shields.io/badge/license-TBD-lightgrey">
</p>

<p align="center">
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> Â·
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> Â·
  <a href="#æŠ€æœ¯æ ˆ">æŠ€æœ¯æ ˆ</a> Â·
  <a href="#æ¨¡å—æ¶æ„">æ¨¡å—æ¶æ„</a> Â·
  <a href="#æ¥å£ä¸çº¦å®š">æ¥å£ä¸çº¦å®š</a> Â·
  <a href="#è´¡çŒ®">è´¡çŒ®</a>
</p>

é¢å‘ AI åˆ›ä½œä¸å·¥ä½œæµçš„å…¨æ ˆå¼€æºé¡¹ç›®ï¼šå‰ç«¯åŸºäº Vue 3 + Vite + TypeScript + Element Plusï¼Œåç«¯é‡‡ç”¨ Spring Boot 3 å¤šæ¨¡å—æ¶æ„ï¼Œé›†æˆç™»å½•é‰´æƒã€èŠå¤©ï¼ˆLLM/OpenRouter æµå¼ï¼‰ã€ComfyUI å·¥ä½œæµç¼–æ’ã€å¯¹è±¡å­˜å‚¨ï¼ˆé˜¿é‡Œäº‘ OSSï¼‰ã€é€šçŸ¥é‚®ä»¶ã€ç³»ç»Ÿç®¡ç†ç­‰èƒ½åŠ›ã€‚

### åŠŸèƒ½é¢„è§ˆ
<p align="center">

  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/082ef78b-8925-40cb-8652-88a6f974c029.png" alt="åŠŸèƒ½é¢„è§ˆ1" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/517989e3-c046-4192-9d5e-a5804f5202d9.png" alt="åŠŸèƒ½é¢„è§ˆ2" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/1cedf4ed-0602-4e9f-a2a0-6321f1df5114.png" alt="åŠŸèƒ½é¢„è§ˆ3" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/01d9a880-d453-40fd-95a8-f210b8d0ed31.png" alt="åŠŸèƒ½é¢„è§ˆ4" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/f7008912-3c91-4e29-badf-b7a38d031bba.png" alt="åŠŸèƒ½é¢„è§ˆ5" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/77833d26-22ff-49d1-b85b-c815c8232f9b.png" alt="åŠŸèƒ½é¢„è§ˆ6" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/c8d6e372-e28b-4839-8be1-bff83c172d7e.png" alt="åŠŸèƒ½é¢„è§ˆ7" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/e669f851-b760-4a7d-8cf5-07a657182d1a.png" alt="åŠŸèƒ½é¢„è§ˆ8" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/70218a85-4b32-424f-ba83-74a3a7e7239c.png" alt="åŠŸèƒ½é¢„è§ˆ9" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/3b5950c1-dfe3-4090-aa38-118d18d0ec1f.png" alt="åŠŸèƒ½é¢„è§ˆ10" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/604843f6-ef54-48ca-a6c8-26ced1931298.png" alt="åŠŸèƒ½é¢„è§ˆ11" width="150" />
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/4cad610a-3276-4888-b520-e3b66ccdb137.png" alt="åŠŸèƒ½é¢„è§ˆ12" width="150" />
</p>

### åŠŸèƒ½ç‰¹æ€§
- **è´¦å·ä¸é‰´æƒ**: åŸºäº Sa-Tokenï¼ŒBearer Token æ–¹å¼ï¼Œå†…ç½®æ¥å£è®¿é—®è¿‡æ»¤ä¸è·¯ç”±è¿‡æ»¤ã€‚
- **èŠå¤©ä¸AIèƒ½åŠ›**: æ•´åˆ OpenRouterï¼Œå¤šæ¨¡å‹æ³¨å†Œä¸è‡ªåŠ¨é€‰æ‹©ï¼›SSE æµå¼å¯¹è¯ï¼Œæ”¯æŒå¤šè¯­è¨€ä¸å¯Œæ–‡æœ¬é«˜äº®ï¼›(ä¸»è¦æ˜¯è¿™ç©æ„æœ‰å…è´¹çš„APIæ¨¡å‹æœåŠ¡å…·ä½“è¯¦è§ymlé…ç½®å’Œå…·ä½“åç«¯æ–‡æ¡£)ã€‚
- **ComfyUI å·¥ä½œæµ**: è¡¨å•åŒ–å‚æ•°æ”¶é›†ã€ä»»åŠ¡æäº¤ä¸çŠ¶æ€è®¢é˜…ã€ä»»åŠ¡è¶…æ—¶ä¸é‡è¯•ç­–ç•¥ã€æ–‡ä»¶ç±»å‹ç™½åå•ã€æ”¯æŒé…ç½®å¤šä¸ªComfyuiæœåŠ¡ã€(æäº¤ä»»åŠ¡ã€å–æ¶ˆä»»åŠ¡ã€é‡æ–°åˆ¶ä½œ)ã€‚
- **å¯¹è±¡å­˜å‚¨**: é˜¿é‡Œäº‘ OSS ä¸Šä¼ ä¸å›æ˜¾ã€å…¨å±€æ–‡ä»¶ç±»å‹ä¸å¤§å°é™åˆ¶é…ç½®ã€‚
- **æ¶ˆæ¯é€šçŸ¥**: é‚®ä»¶éªŒè¯ç /é€šçŸ¥ï¼ˆThymeleaf æ¨¡æ¿ï¼‰ï¼Œç³»ç»Ÿå…¬å‘Šä¸ç«™å†…é€šçŸ¥ã€‚
- **ç³»ç»Ÿç®¡ç†**: ç”¨æˆ·/ç§¯åˆ†ã€å…¬å‘Šã€å…‘æ¢ç ã€ç»Ÿè®¡æ¦‚è§ˆç­‰å¸¸è§åå°åŠŸèƒ½ã€‚


### éƒ¨ç½²

#### åç«¯éƒ¨ç½²

åç«¯æ˜¯æ ‡å‡†çš„ Spring Boot å¤šæ¨¡å—é¡¹ç›®ï¼Œå¯ä»¥æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ JAR æ–‡ä»¶è¿›è¡Œéƒ¨ç½²ã€‚æˆ‘ä»¬æä¾›äº†éå¸¸è¯¦å°½çš„éƒ¨ç½²æ–‡æ¡£ï¼Œè¦†ç›–äº†ä¼ ç»ŸæœåŠ¡å™¨ã€Docker å®¹å™¨ä»¥åŠ Kubernetes (K8s) ç­‰å¤šç§éƒ¨ç½²æ–¹æ¡ˆã€‚

ğŸ‘‰ **[ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†çš„åç«¯éƒ¨ç½²æŒ‡å—](./singleton/README.md)**

#### å‰ç«¯éƒ¨ç½²

å‰ç«¯é¡¹ç›®åŸºäº Vue 3 å’Œ Vite æ„å»ºï¼Œéƒ¨ç½²æ—¶éœ€ç¼–è¯‘æˆé™æ€æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ Nginx ç­‰ Web æœåŠ¡å™¨è¿›è¡Œæ‰˜ç®¡å’Œåå‘ä»£ç†ã€‚

ğŸ‘‰ **[ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†çš„å‰ç«¯éƒ¨ç½²æŒ‡å—](./vue/README.md)**

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: Vue 3, Vite, TypeScript, Pinia, Vue Router, Element Plus, vue-i18n, highlight.js, lottie-web, @google/model-viewerã€‚
- **åç«¯**: Spring Boot 3, Web + WebFluxï¼ˆSSEï¼‰, Sa-Token, MyBatis-Plus, Druid, MySQL, Redisï¼ˆRedissonï¼‰, Spring Mail, WebSocket, Lombok, Guavaã€‚

### æ¨¡å—æ¶æ„
```
singleton/               # åç«¯å¤šæ¨¡å—èšåˆå·¥ç¨‹ï¼ˆMavenï¼‰
  application/           # å¯æ‰§è¡Œå¯åŠ¨æ¨¡å—ï¼ˆèšåˆå„ä¸šåŠ¡æ¨¡å—ï¼‰
  common/                # å…¬å…±ä¾èµ–ï¼šé…ç½®ã€æ‹¦æˆªã€å·¥å…·ã€å­˜å‚¨ã€é‰´æƒç­‰
  auth/                  # è®¤è¯ä¸ç”¨æˆ·ç›¸å…³æ¥å£
  comfyui/               # ComfyUI ä»»åŠ¡ç¼–æ’ä¸ WebSocket æ¨é€
  llm/                   # LLM å¯¹è¯ä¸æ¨¡å‹æ³¨å†Œï¼ˆOpenRouterï¼‰
  notice/                # é€šçŸ¥ä¸å…¬å‘Š
  oss/                   # é˜¿é‡Œäº‘ OSS èƒ½åŠ›å°è£…
  system/                # ç³»ç»Ÿç®¡ç†åŸŸ
vue/                     # å‰ç«¯å·¥ç¨‹ï¼ˆViteï¼‰
```

### å¿«é€Ÿå¼€å§‹
#### å‰ç½®æ¡ä»¶
- JDK 21+ï¼ˆå»ºè®® 22ï¼‰
- Maven 3.9+
- Node.js 18+ / pnpm æˆ– npm
- MySQL 8+ã€Redis 6+

#### é…ç½®åç«¯
1. å¤åˆ¶æˆ–å‚è€ƒ `singleton/application/src/main/resources/application-dev.yml`ï¼ŒæŒ‰éœ€ä¿®æ”¹ä»¥ä¸‹å…³é”®é¡¹ï¼š
   - `spring.datasource.url/username/password`ï¼ˆMySQLï¼‰
   - `spring.data.redis.host/port/password`ï¼ˆRedisï¼‰
   - `spring.mail.*`ï¼ˆå¯é€‰ï¼Œé‚®ä»¶éªŒè¯ç /é€šçŸ¥ï¼‰
   - `ali.oss.*`ï¼ˆé˜¿é‡Œäº‘ OSSï¼‰
   - `comfyui.server[*].url`ï¼ˆComfyUI æœåŠ¡åœ°å€ï¼‰
   - `open-router.api-key`ï¼ˆOpenRouter API Keyï¼‰
2. å¯åŠ¨ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ï¼š
   ```bash
   mvn -f singleton/pom.xml -pl application -am spring-boot:run -Pdev
   ```
   æˆ–æ‰“åŒ…ï¼š
   ```bash
   mvn -f singleton/pom.xml -Pdev clean package
   java -jar singleton/application/target/application-*.jar
   ```
3. é»˜è®¤åç«¯åœ°å€ï¼š`http://localhost:9898/api`ï¼ˆ`server.servlet.context-path=/api`ï¼‰ã€‚

#### å¼€å‘ç¯å¢ƒé…ç½®è¯¦è§£ï¼ˆapplication-dev.ymlï¼‰

ç¤ºä¾‹ï¼ˆè¯·ç”¨ä½ è‡ªå·±çš„å€¼æ›¿æ¢å ä½ç¬¦ï¼‰ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/ghosts?useUnicode=true&serverTimezone=Asia/Shanghai&characterEncoding=utf-8&zeroDateTimeBehavior=convertToNull&autoReconnect=true&allowMultiQueries=true&useSSL=true # MySQL è¿æ¥ä¸²
    username: root # æ•°æ®åº“ç”¨æˆ·
    password: "<your_mysql_password>" # æ•°æ®åº“å¯†ç 
  data:
    redis:
      database: 1 # é€»è¾‘åº“(0-15)
      host: 127.0.0.1 # Redis ä¸»æœº
      port: 6379 # Redis ç«¯å£
      password: "" # è‹¥æ— å¯†ç ç•™ç©º
  mail:
    host: smtp.qq.com # SMTP æœåŠ¡å™¨
    username: "<your_email>@qq.com" # å‘ä¿¡é‚®ç®±
    password: "<your_email_auth_code>" # æˆæƒç /åº”ç”¨ä¸“ç”¨å¯†ç 
    default-encoding: UTF-8 # ç¼–ç 
    properties:
      mail:
        smtp:
          socketFactory:
            class: javax.net.ssl.SSLSocketFactory # å¯ç”¨ SSL
    port: 587 # SMTP ç«¯å£

admin:
  init:
    enabled: true # å¯ç”¨é¦–æ¬¡è‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜
    email: admin@example.com # ç®¡ç†å‘˜é‚®ç®±
    password: admin123 # ç®¡ç†å‘˜å¯†ç 
    nickname: ç³»ç»Ÿç®¡ç†å‘˜ # ç®¡ç†å‘˜æ˜µç§°
    initial-credits: 1000000 # åˆå§‹ç§¯åˆ†

ali:
  certified:
    access-key: "<your_ali_access_key>" # é˜¿é‡Œäº‘ AK
    secret-key: "<your_ali_secret_key>" # é˜¿é‡Œäº‘ SK
  oss:
    endpoint: "oss-accelerate.aliyuncs.com" # OSS è®¿é—®ç«¯ç‚¹
    bucket-name: "<your_bucket_name>" # OSS æ¡¶å
    domain: "https://<your_bucket_name>.oss-accelerate.aliyuncs.com" # ossåŸŸå
    supported-file-types:
      - extension: "jpg" # æ‰©å±•å
        mimeType: "image/jpeg" # MIME
        maxSizeInBytes: 5242880 # å•æ–‡ä»¶ä¸Šé™

comfyui:
  server:
    - name: COMFYUI-1å· # æ ‡è¯†
      url: http://localhost:8188 # ComfyUI åœ°å€
  submit-task-max: 100 # æœ€å¤§æäº¤é˜Ÿåˆ—
  task:
    max-retry-time: 30 # å•æ¬¡è¿æ¥è¶…æ—¶(ç§’)
    max-retries: 2 # å¤±è´¥é‡è¯•æ¬¡æ•°
    timeout-check-interval: 30 # è¶…æ—¶å·¡æ£€é—´éš”(åˆ†é’Ÿ)
  supported-file-types:
    jpg: "image/jpeg" # è¡¨å•å…è®¸çš„ä¸Šä¼ ç±»å‹
    png: "image/png"

open-router:
  api-key: "<your_openrouter_api_key>" # OpenRouter API Key
  base-url: "https://openrouter.ai/api/v1" # API åœ°å€
  connect-timeout: 30000 # è¿æ¥è¶…æ—¶(ms)
  read-timeout: 60000 # è¯»å–è¶…æ—¶(ms)
  chat:
    session-ttl-seconds: 2592000 # ä¼šè¯ TTL(ç§’)
  truncation:
    response-token-reserve: 2000 # ä¸ºå›å¤é¢„ç•™ Token
    text-chars-per-token: 4 # æ–‡æœ¬å­—ç¬¦/Token
    image-token-estimate: 1500 # å›¾ç‰‡ä¼°ç®— Token
    file-token-estimate: 4000 # æ–‡ä»¶ä¼°ç®— Token
    enable-compression: true # æ–‡æœ¬å‹ç¼©
  plugins:
    web:
      enabled: true # è”ç½‘æœç´¢
      max-results: 5 # ç»“æœä¸Šé™
    file-parser:
      enabled: true # æ–‡ä»¶è§£æ
      pdf:
        engine: pdf-text # è¯†åˆ«å¼•æ“
        static-filename: document.pdf # é»˜è®¤æ–‡ä»¶å
  remote-registry:
    enabled: true # å¯ç”¨æ¨¡å‹æ‹‰å–
    url: "https://openrouter.ai/api/frontend/models" # æ¨¡å‹åˆ—è¡¨åœ°å€
    cron: "0 0/30 * * * ?" # åˆ·æ–°é—´éš”
    read-timeout-seconds: 10 # è¯»å–è¶…æ—¶(ç§’)
    filter: FREE # æ¨¡å‹èŒƒå›´ ALL/FREE/PAID
    auto:
      modelId: "<optional_model_id>" # å›ºå®šæ¨¡å‹(å¯é€‰)
      prefer: FREE # FREE/PAID
  audio:
    max-size-bytes: 20971520 # æœ€å¤§éŸ³é¢‘å¤§å°
    allowed-formats:
      - wav
      - mp3
    default-format: wav # é»˜è®¤æ ¼å¼
  reasoning:
    enabled: true # å¼€å¯æ·±åº¦æ€è€ƒ
    max-tokens: 2000 # æ€è€ƒ Token ä¸Šé™
  upload:
    max-attachment-count: 8 # å•æ¶ˆæ¯é™„ä»¶æ•°

server:
  port: 9000 # å¼€å‘ç«¯å£(å¯æ”¹ 9898 ä»¥åŒ¹é…å‰ç«¯)
  servlet:
    context-path: /api # API å‰ç¼€
```

#### å¯åŠ¨å‰ç«¯
```bash
cd vue
npm i
npm run dev
```
è®¿é—®ï¼š`http://localhost:5173`

### æ¥å£ä¸çº¦å®š
- åŸºç¡€å‰ç¼€ï¼š`/api`
- è®¤è¯å¤´ï¼š`Authorization: Bearer <token>`ï¼ˆSa-Tokenï¼‰
- è¿”å›ç»“æ„ä¸çŠ¶æ€ç ï¼šéµå¾ªåç«¯ç»Ÿä¸€çº¦å®šï¼ˆè§ `common` æ¨¡å—ä¸å„ `controller`ï¼‰ã€‚

### å®‰å…¨ä¸åˆè§„
- è¯·å‹¿åœ¨ä»“åº“ä¸­æäº¤æ•æ„Ÿå‡­æ®ï¼ˆæ•°æ®åº“ã€é‚®ç®±ã€OSSã€OpenRouter Key ç­‰ï¼‰ã€‚
- å»ºè®®ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–ç§æœ‰é…ç½®æ–‡ä»¶è¦†ç›–æ ·ä¾‹é…ç½®ã€‚
- å…¬å…±æ¼”ç¤ºåœºæ™¯è¯·é™åˆ¶æ–‡ä»¶ä¸Šä¼ ç±»å‹ä¸å¤§å°ï¼ˆæœ¬é¡¹ç›®å·²æä¾›å…¨å±€ç™½åå•ä¸å¤§å°é™åˆ¶ï¼‰ã€‚

### è·¯çº¿å›¾ï¼ˆå»ºè®®ï¼‰
- è·¨æ¨¡å‹ä¼šè¯å…±äº«ä¸æ¶ˆæ¯å›æ”¾ä¼˜åŒ–
- ComfyUI èŠ‚ç‚¹æ¨¡æ¿ç®¡ç†ä¸è¡¨å•è‡ªåŠ¨ç”Ÿæˆ
- æ›´ç»†ç²’åº¦çš„æƒé™ä¸å®¡è®¡æ—¥å¿—
- å®Œæ•´çš„ E2E/å•å…ƒæµ‹è¯•ä¸ CI/CD å·¥ä½œæµ

### è´¡çŒ®
æ¬¢è¿æäº¤ Issue ä¸ PRï¼š
- è§„èŒƒæäº¤ä¿¡æ¯ï¼Œå°½é‡é™„ä¸Šå¤ç°æ­¥éª¤æˆ–æˆªå›¾
- å¯¹äºæ–°å¢æ¨¡å—ï¼Œè¯·è¡¥å……ç›¸åº”æ–‡æ¡£ä¸ç¤ºä¾‹é…ç½®

### æ”¯æŒä½œè€…
å¦‚æœæœ¬é¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿èµèµæ”¯æŒï¼ˆå¾®ä¿¡ï¼‰ï¼š

<p align="center">
  <img src="https://hyperbot.oss-accelerate.aliyuncs.com/TEMP/0942b17f-9eec-4291-adcb-612507b9dce6.jpg" alt="å¾®ä¿¡èµèµç " width="280" />
</p>

### è®¸å¯è¯
å½“å‰ä»“åº“æš‚æœªæ˜¾å¼å£°æ˜è®¸å¯è¯ï¼Œå»ºè®®åœ¨æ­£å¼å¯¹å¤–å¼€æºå‰è¡¥å…… `LICENSE` æ–‡ä»¶ï¼ˆå¸¸è§é€‰æ‹©ï¼šMIT/Apache-2.0ï¼‰ã€‚


